<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Icono -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/iconFerreteria.ico') }}">

    <!-- SDK CLIENT_ID -->
    <script src="https://www.paypal.com/sdk/js?client-id={{ client_id }}&currency=USD"></script>

    <title>Checkout - FerreterÃ­a Watajai</title>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center p-6">

    <div class="max-w-lg w-full bg-white p-8 rounded-2xl shadow-xl border border-gray-200">

        <!-- TÃ­tulo -->
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">
            ðŸ§¾ Checkout
        </h1>

        <!-- Total -->
        <div class="bg-gray-50 p-5 rounded-xl border border-gray-200 shadow-sm">
            <p class="text-xl font-semibold text-gray-700 text-center">
                Total a pagar:
            </p>
            <p class="text-4xl font-extrabold text-[#ff751f] text-center mt-2">
                ${{ total }}
            </p>
        </div>

        <!-- BotÃ³n de PayPal -->
        <div id="paypal-button-container" class="mt-8"></div>

        <!-- Texto inferior -->
        <p class="text-center text-gray-500 text-sm mt-6">
            Tu pago es procesado de manera segura ðŸ”’
        </p>
    </div>

<script>
paypal.Buttons({

    createOrder: function() {
        return fetch("/crear_orden_paypal", {
            method: "POST"
        }).then(res => res.json()).then(data => data.id);
    },

    onApprove: function(data) {
        return fetch(`/capturar_pago_paypal/${data.orderID}`, {
            method: "POST"
        }).then(res => res.json()).then(() => {
            window.location.href = "/pedido_exitoso";
        })
    }

}).render("#paypal-button-container")
</script>

</body>
</html>
